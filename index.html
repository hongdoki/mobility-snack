<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOBILITY SNACK</title>
</head>

<body>
    <header>
        <h1>This is a motherfucking mobility snack app.</h1>
        <p>Youâ€™re stiff as a board. You don't need a 50MB React bundle to move your joints. You need to get off your
            ass.</p>
    </header>

    <hr>

    <main>
        <button id="get-snack" onclick="getSnack()" disabled>Loading snacks...</button>

        <div id="result" style="margin-top: 20px; display: none;">
            <p><strong>TOOL:</strong> <span id="tool"></span></p>
            <p><strong>EXERCISE:</strong> <span id="name"></span></p>
            <p><strong>DO THIS:</strong> <span id="desc"></span></p>
            <p><strong>LEARN:</strong> <a id="yt-link" href="#" target="_blank">Search this shit on YouTube</a></p>
        </div>
    </main>

    <hr>
    <footer>
        <p>Go move. Or don't. I'm a website, not your mom.</p>
        <p style="font-size: 0.8em; color: #666;">
            Motivated by <a href="https://motherfuckingwebsite.com/" target="_blank">motherfuckingwebsite.com</a>.
            Made with Gemini.
        </p>
    </footer>

    <script>
        let allSnacks = [];

        // List your category files here
        const dataFiles = [
            'data/office.json',
            'data/wall.json',
            'data/bodyweight.json',
            'data/tools.json',
            'data/primal.json',
            'data/chaos.json',
            'data/foundations.json'
        ];

        async function initApp() {
            try {
                // Fetch all files in parallel
                const promises = dataFiles.map(file => fetch(file).then(res => res.json()));
                const results = await Promise.all(promises);

                // Flatten the arrays into one
                allSnacks = results.flat();

                // Enable the button
                const btn = document.getElementById('get-snack');
                btn.innerText = "Give me a fucking exercise";
                btn.disabled = false;
            } catch (err) {
                console.error("Failed to load snacks", err);
                document.getElementById('get-snack').innerText = "Broken. Check console.";
            }
        }

        function getSnack() {
            if (allSnacks.length === 0) return;

            const snack = allSnacks[Math.floor(Math.random() * allSnacks.length)];

            document.getElementById('tool').innerText = snack.tool;
            document.getElementById('name').innerText = snack.name;
            document.getElementById('desc').innerText = snack.desc;

            const searchQuery = encodeURIComponent(snack.name + " mobility exercise");
            document.getElementById('yt-link').href = `https://www.youtube.com/results?search_query=${searchQuery}`;

            document.getElementById('result').style.display = 'block';
        }

        // Run on load
        initApp();
    </script>
</body>

</html>